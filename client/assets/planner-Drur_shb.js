import{p as y,a as K,R as H,w as Et}from"./chunk-4WY6JWTD-CozBfH4Q.js";import{d as R}from"./dayjs.min-Db5ZPLfy.js";import{t as me}from"./bundle-mjs-COJ8Fh6m.js";import{u as Nt,a as jt,e as St,b as Mt,d as Ct}from"./store-DPrGR2vF.js";import{c as fe,X as dt}from"./x-Bpw6JrRp.js";const Tt=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ot=fe("chevron-right",Tt);const Lt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rt=fe("chevron-left",Lt);const Yt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],It=fe("pen",Yt);const Ut=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pt=fe("plus",Ut);const Bt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ht=fe("save",Bt);const qt=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zt=fe("trash-2",qt),Xe=({isOpen:e,onClose:s,title:t,children:a})=>e?y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-500/50 p-4 backdrop-blur-sm",children:y.jsxs("div",{className:"animate-fade-in-up max-h-[80vh] w-full max-w-md overflow-auto rounded-xl bg-white shadow-2xl",children:[y.jsxs("div",{className:"flex items-center justify-between border-b bg-gray-50 p-4",children:[y.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t}),y.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:y.jsx(dt,{size:24})})]}),y.jsx("div",{className:"p-4",children:a})]})}):null,je=2,ut=K.memo(({day:e,currentDate:s,dayEvents:t,onDateClick:a})=>{const o=R(),n=e.isSame(o,"day"),u=e.isSame(s,"month"),c=e.isBefore(o,"day");return y.jsxs("button",{onClick:()=>a(e),className:me("relative cursor-pointer border-r border-b p-2 transition hover:bg-blue-50",!u&&"bg-gray-50 text-gray-400",c&&"&& opacity-50 hover:bg-transparent"),children:[y.jsx("div",{className:me("mb-1 flex h-7 w-7 items-center justify-center rounded-full text-sm font-medium",n&&u&&"bg-blue-600 text-white",!u&&"text-gray-400",n&&!u&&"border border-blue-600 bg-transparent text-blue-600"),children:e.format("D")}),y.jsxs("div",{className:"flex h-[50px] flex-col gap-1 overflow-hidden",children:[t.slice(0,je).map(w=>y.jsxs("div",{className:me("flex w-full truncate rounded px-1 text-[10px]",u?"bg-blue-100 text-blue-800":"bg-gray-200 text-gray-500"),children:[y.jsx("span",{className:"mr-1 font-bold",children:R(w.dateTime).format("HH:mm")}),y.jsx("span",{title:w.title,children:w.title})]},w.id)),t.length>je&&y.jsxs("span",{className:me("pl-1 text-[10px]",u?"text-gray-500":"text-gray-400"),children:["+ ",t.length-je," more"]})]})]})});ut.displayName="CalendarDay";var ve=e=>e.type==="checkbox",oe=e=>e instanceof Date,P=e=>e==null;const ct=e=>typeof e=="object";var T=e=>!P(e)&&!Array.isArray(e)&&ct(e)&&!oe(e),$t=e=>T(e)&&e.target?ve(e.target)?e.target.checked:e.target.value:e,Wt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Kt=(e,s)=>e.has(Wt(s)),Xt=e=>{const s=e.constructor&&e.constructor.prototype;return T(s)&&s.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function L(e){let s;const t=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Te&&(e instanceof Blob||a))&&(t||T(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Xt(e))s=e;else for(const o in e)e.hasOwnProperty(o)&&(s[o]=L(e[o]));else return e;return s}var Fe=e=>/^\w*$/.test(e),M=e=>e===void 0,Oe=e=>Array.isArray(e)?e.filter(Boolean):[],Le=e=>Oe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),g=(e,s,t)=>{if(!s||!T(e))return t;const a=(Fe(s)?[s]:Le(s)).reduce((o,n)=>P(o)?o:o[n],e);return M(a)||a===e?M(e[s])?t:e[s]:a},te=e=>typeof e=="boolean",E=(e,s,t)=>{let a=-1;const o=Fe(s)?[s]:Le(s),n=o.length,u=n-1;for(;++a<n;){const c=o[a];let w=t;if(a!==u){const N=e[c];w=T(N)||Array.isArray(N)?N:isNaN(+o[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=w,e=e[c]}};const Ge={BLUR:"blur",FOCUS_OUT:"focusout"},J={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Gt=H.createContext(null);Gt.displayName="HookFormContext";var Jt=(e,s,t,a=!0)=>{const o={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const u=n;return s._proxyFormState[u]!==J.all&&(s._proxyFormState[u]=!a||J.all),e[u]}});return o};const Qt=typeof window<"u"?H.useLayoutEffect:H.useEffect;var q=e=>typeof e=="string",Zt=(e,s,t,a,o)=>q(e)?(a&&s.watch.add(e),g(t,e,o)):Array.isArray(e)?e.map(n=>(a&&s.watch.add(n),g(t,n))):(a&&(s.watchAll=!0),t),Me=e=>P(e)||!ct(e);function ae(e,s,t=new WeakSet){if(Me(e)||Me(s))return Object.is(e,s);if(oe(e)&&oe(s))return e.getTime()===s.getTime();const a=Object.keys(e),o=Object.keys(s);if(a.length!==o.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of a){const u=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const c=s[n];if(oe(u)&&oe(c)||T(u)&&T(c)||Array.isArray(u)&&Array.isArray(c)?!ae(u,c,t):!Object.is(u,c))return!1}}return!0}var er=(e,s,t,a,o)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[a]:o||!0}}:{},xe=e=>Array.isArray(e)?e:[e],Je=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}};function ft(e,s){const t={};for(const a in e)if(e.hasOwnProperty(a)){const o=e[a],n=s[a];if(o&&T(o)&&n){const u=ft(o,n);T(u)&&(t[a]=u)}else e[a]&&(t[a]=n)}return t}var I=e=>T(e)&&!Object.keys(e).length,Re=e=>e.type==="file",Q=e=>typeof e=="function",Ve=e=>{if(!Te)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},yt=e=>e.type==="select-multiple",Ye=e=>e.type==="radio",tr=e=>Ye(e)||ve(e),Se=e=>Ve(e)&&e.isConnected;function rr(e,s){const t=s.slice(0,-1).length;let a=0;for(;a<t;)e=M(e)?a++:e[s[a++]];return e}function sr(e){for(const s in e)if(e.hasOwnProperty(s)&&!M(e[s]))return!1;return!0}function C(e,s){const t=Array.isArray(s)?s:Fe(s)?[s]:Le(s),a=t.length===1?e:rr(e,t),o=t.length-1,n=t[o];return a&&delete a[n],o!==0&&(T(a)&&I(a)||Array.isArray(a)&&sr(a))&&C(e,t.slice(0,-1)),e}var ir=e=>{for(const s in e)if(Q(e[s]))return!0;return!1};function ht(e){return Array.isArray(e)||T(e)&&!ir(e)}function Ce(e,s={}){for(const t in e){const a=e[t];ht(a)?(s[t]=Array.isArray(a)?[]:{},Ce(a,s[t])):M(a)||(s[t]=!0)}return s}function ce(e,s,t){t||(t=Ce(s));for(const a in e){const o=e[a];if(ht(o))M(s)||Me(t[a])?t[a]=Ce(o,Array.isArray(o)?[]:{}):ce(o,P(s)?{}:s[a],t[a]);else{const n=s[a];t[a]=!ae(o,n)}}return t}const Qe={value:!1,isValid:!1},Ze={value:!0,isValid:!0};var gt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!M(e[0].attributes.value)?M(e[0].value)||e[0].value===""?Ze:{value:e[0].value,isValid:!0}:Ze:Qe}return Qe},mt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:a})=>M(e)?e:s?e===""?NaN:e&&+e:t&&q(e)?new Date(e):a?a(e):e;const et={isValid:!1,value:null};var xt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,et):et;function tt(e){const s=e.ref;return Re(s)?s.files:Ye(s)?xt(e.refs).value:yt(s)?[...s.selectedOptions].map(({value:t})=>t):ve(s)?gt(e.refs).value:mt(M(s.value)?e.ref.value:s.value,e)}var ar=(e,s,t,a)=>{const o={};for(const n of e){const u=g(s,n);u&&E(o,n,u._f)}return{criteriaMode:t,names:[...e],fields:o,shouldUseNativeValidation:a}},we=e=>e instanceof RegExp,ge=e=>M(e)?e:we(e)?e.source:T(e)?we(e.value)?e.value.source:e.value:e,rt=e=>({isOnSubmit:!e||e===J.onSubmit,isOnBlur:e===J.onBlur,isOnChange:e===J.onChange,isOnAll:e===J.all,isOnTouch:e===J.onTouched});const st="AsyncFunction";var nr=e=>!!e&&!!e.validate&&!!(Q(e.validate)&&e.validate.constructor.name===st||T(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===st)),lr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),it=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const be=(e,s,t,a)=>{for(const o of t||Object.keys(e)){const n=g(e,o);if(n){const{_f:u,...c}=n;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],o)&&!a)return!0;if(u.ref&&s(u.ref,u.name)&&!a)return!0;if(be(c,s))break}else if(T(c)&&be(c,s))break}}};function at(e,s,t){const a=g(e,t);if(a||Fe(t))return{error:a,name:t};const o=t.split(".");for(;o.length;){const n=o.join("."),u=g(s,n),c=g(e,n);if(u&&!Array.isArray(u)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};if(c&&c.root&&c.root.type)return{name:`${n}.root`,error:c.root};o.pop()}return{name:t}}var or=(e,s,t,a)=>{t(e);const{name:o,...n}=e;return I(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(u=>s[u]===(!a||J.all))},dr=(e,s,t)=>!e||!s||e===s||xe(e).some(a=>a&&(t?a===s:a.startsWith(s)||s.startsWith(a))),ur=(e,s,t,a,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(s||e):(t?a.isOnBlur:o.isOnBlur)?!e:(t?a.isOnChange:o.isOnChange)?e:!0,cr=(e,s)=>!Oe(g(e,s)).length&&C(e,s),fr=(e,s,t)=>{const a=xe(g(e,t));return E(a,"root",s[t]),E(e,t,a),e};function nt(e,s,t="validate"){if(q(e)||Array.isArray(e)&&e.every(q)||te(e)&&!e)return{type:t,message:q(e)?e:"",ref:s}}var ue=e=>T(e)&&!we(e)?e:{value:e,message:""},lt=async(e,s,t,a,o,n)=>{const{ref:u,refs:c,required:w,maxLength:N,minLength:p,min:b,max:v,pattern:re,validate:k,name:j,valueAsNumber:z,mount:ye}=e._f,_=g(t,j);if(!ye||s.has(j))return{};const X=c?c[0]:u,$=V=>{o&&X.reportValidity&&(X.setCustomValidity(te(V)?"":V||""),X.reportValidity())},x={},G=Ye(u),O=ve(u),ne=G||O,B=(z||Re(u))&&M(u.value)&&M(_)||Ve(u)&&u.value===""||_===""||Array.isArray(_)&&!_.length,le=er.bind(null,j,a,x),Z=(V,D,S,Y=se.maxLength,U=se.minLength)=>{const ee=V?D:S;x[j]={type:V?Y:U,message:ee,ref:u,...le(V?Y:U,ee)}};if(n?!Array.isArray(_)||!_.length:w&&(!ne&&(B||P(_))||te(_)&&!_||O&&!gt(c).isValid||G&&!xt(c).isValid)){const{value:V,message:D}=q(w)?{value:!!w,message:w}:ue(w);if(V&&(x[j]={type:se.required,message:D,ref:X,...le(se.required,D)},!a))return $(D),x}if(!B&&(!P(b)||!P(v))){let V,D;const S=ue(v),Y=ue(b);if(!P(_)&&!isNaN(_)){const U=u.valueAsNumber||_&&+_;P(S.value)||(V=U>S.value),P(Y.value)||(D=U<Y.value)}else{const U=u.valueAsDate||new Date(_),ee=pe=>new Date(new Date().toDateString()+" "+pe),he=u.type=="time",de=u.type=="week";q(S.value)&&_&&(V=he?ee(_)>ee(S.value):de?_>S.value:U>new Date(S.value)),q(Y.value)&&_&&(D=he?ee(_)<ee(Y.value):de?_<Y.value:U<new Date(Y.value))}if((V||D)&&(Z(!!V,S.message,Y.message,se.max,se.min),!a))return $(x[j].message),x}if((N||p)&&!B&&(q(_)||n&&Array.isArray(_))){const V=ue(N),D=ue(p),S=!P(V.value)&&_.length>+V.value,Y=!P(D.value)&&_.length<+D.value;if((S||Y)&&(Z(S,V.message,D.message),!a))return $(x[j].message),x}if(re&&!B&&q(_)){const{value:V,message:D}=ue(re);if(we(V)&&!_.match(V)&&(x[j]={type:se.pattern,message:D,ref:u,...le(se.pattern,D)},!a))return $(D),x}if(k){if(Q(k)){const V=await k(_,t),D=nt(V,X);if(D&&(x[j]={...D,...le(se.validate,D.message)},!a))return $(D.message),x}else if(T(k)){let V={};for(const D in k){if(!I(V)&&!a)break;const S=nt(await k[D](_,t),X,D);S&&(V={...S,...le(D,S.message)},$(S.message),a&&(x[j]=V))}if(!I(V)&&(x[j]={ref:X,...V},!a))return x}}return $(!0),x};const yr={mode:J.onSubmit,reValidateMode:J.onChange,shouldFocusError:!0};function hr(e={}){let s={...yr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Q(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},o=T(s.defaultValues)||T(s.values)?L(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:L(o),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},w,N=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...p};const v={array:Je(),state:Je()},re=s.criteriaMode===J.all,k=r=>i=>{clearTimeout(N),N=setTimeout(r,i)},j=async r=>{if(!s.disabled&&(p.isValid||b.isValid||r)){const i=s.resolver?I((await O()).errors):await B(a,!0);i!==t.isValid&&v.state.next({isValid:i})}},z=(r,i)=>{!s.disabled&&(p.isValidating||p.validatingFields||b.isValidating||b.validatingFields)&&((r||Array.from(c.mount)).forEach(l=>{l&&(i?E(t.validatingFields,l,i):C(t.validatingFields,l))}),v.state.next({validatingFields:t.validatingFields,isValidating:!I(t.validatingFields)}))},ye=(r,i=[],l,h,f=!0,d=!0)=>{if(h&&l&&!s.disabled){if(u.action=!0,d&&Array.isArray(g(a,r))){const m=l(g(a,r),h.argA,h.argB);f&&E(a,r,m)}if(d&&Array.isArray(g(t.errors,r))){const m=l(g(t.errors,r),h.argA,h.argB);f&&E(t.errors,r,m),cr(t.errors,r)}if((p.touchedFields||b.touchedFields)&&d&&Array.isArray(g(t.touchedFields,r))){const m=l(g(t.touchedFields,r),h.argA,h.argB);f&&E(t.touchedFields,r,m)}(p.dirtyFields||b.dirtyFields)&&(t.dirtyFields=ce(o,n)),v.state.next({name:r,isDirty:Z(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(n,r,i)},_=(r,i)=>{E(t.errors,r,i),v.state.next({errors:t.errors})},X=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},$=(r,i,l,h)=>{const f=g(a,r);if(f){const d=g(n,r,M(l)?g(o,r):l);M(d)||h&&h.defaultChecked||i?E(n,r,i?d:tt(f._f)):S(r,d),u.mount&&!u.action&&j()}},x=(r,i,l,h,f)=>{let d=!1,m=!1;const F={name:r};if(!s.disabled){if(!l||h){(p.isDirty||b.isDirty)&&(m=t.isDirty,t.isDirty=F.isDirty=Z(),d=m!==F.isDirty);const A=ae(g(o,r),i);m=!!g(t.dirtyFields,r),A?C(t.dirtyFields,r):E(t.dirtyFields,r,!0),F.dirtyFields=t.dirtyFields,d=d||(p.dirtyFields||b.dirtyFields)&&m!==!A}if(l){const A=g(t.touchedFields,r);A||(E(t.touchedFields,r,l),F.touchedFields=t.touchedFields,d=d||(p.touchedFields||b.touchedFields)&&A!==l)}d&&f&&v.state.next(F)}return d?F:{}},G=(r,i,l,h)=>{const f=g(t.errors,r),d=(p.isValid||b.isValid)&&te(i)&&t.isValid!==i;if(s.delayError&&l?(w=k(()=>_(r,l)),w(s.delayError)):(clearTimeout(N),w=null,l?E(t.errors,r,l):C(t.errors,r)),(l?!ae(f,l):f)||!I(h)||d){const m={...h,...d&&te(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...m},v.state.next(m)}},O=async r=>{z(r,!0);const i=await s.resolver(n,s.context,ar(r||c.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return z(r),i},ne=async r=>{const{errors:i}=await O(r);if(r)for(const l of r){const h=g(i,l);h?E(t.errors,l,h):C(t.errors,l)}else t.errors=i;return i},B=async(r,i,l={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:d,...m}=f;if(d){const F=c.array.has(d.name),A=f._f&&nr(f._f);A&&p.validatingFields&&z([d.name],!0);const W=await lt(f,c.disabled,n,re,s.shouldUseNativeValidation&&!i,F);if(A&&p.validatingFields&&z([d.name]),W[d.name]&&(l.valid=!1,i))break;!i&&(g(W,d.name)?F?fr(t.errors,W,d.name):E(t.errors,d.name,W[d.name]):C(t.errors,d.name))}!I(m)&&await B(m,i,l)}}return l.valid},le=()=>{for(const r of c.unMount){const i=g(a,r);i&&(i._f.refs?i._f.refs.every(l=>!Se(l)):!Se(i._f.ref))&&De(r)}c.unMount=new Set},Z=(r,i)=>!s.disabled&&(r&&i&&E(n,r,i),!ae(pe(),o)),V=(r,i,l)=>Zt(r,c,{...u.mount?n:M(i)?o:q(r)?{[r]:i}:i},l,i),D=r=>Oe(g(u.mount?n:o,r,s.shouldUnregister?g(o,r,[]):[])),S=(r,i,l={})=>{const h=g(a,r);let f=i;if(h){const d=h._f;d&&(!d.disabled&&E(n,r,mt(i,d)),f=Ve(d.ref)&&P(i)?"":i,yt(d.ref)?[...d.ref.options].forEach(m=>m.selected=f.includes(m.value)):d.refs?ve(d.ref)?d.refs.forEach(m=>{(!m.defaultChecked||!m.disabled)&&(Array.isArray(f)?m.checked=!!f.find(F=>F===m.value):m.checked=f===m.value||!!f)}):d.refs.forEach(m=>m.checked=m.value===f):Re(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||v.state.next({name:r,values:L(n)})))}(l.shouldDirty||l.shouldTouch)&&x(r,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&de(r)},Y=(r,i,l)=>{for(const h in i){if(!i.hasOwnProperty(h))return;const f=i[h],d=r+"."+h,m=g(a,d);(c.array.has(r)||T(f)||m&&!m._f)&&!oe(f)?Y(d,f,l):S(d,f,l)}},U=(r,i,l={})=>{const h=g(a,r),f=c.array.has(r),d=L(i);E(n,r,d),f?(v.array.next({name:r,values:L(n)}),(p.isDirty||p.dirtyFields||b.isDirty||b.dirtyFields)&&l.shouldDirty&&v.state.next({name:r,dirtyFields:ce(o,n),isDirty:Z(r,d)})):h&&!h._f&&!P(d)?Y(r,d,l):S(r,d,l),it(r,c)&&v.state.next({...t,name:r}),v.state.next({name:u.mount?r:void 0,values:L(n)})},ee=async r=>{u.mount=!0;const i=r.target;let l=i.name,h=!0;const f=g(a,l),d=A=>{h=Number.isNaN(A)||oe(A)&&isNaN(A.getTime())||ae(A,g(n,l,A))},m=rt(s.mode),F=rt(s.reValidateMode);if(f){let A,W;const _e=i.type?tt(f._f):$t(r),ie=r.type===Ge.BLUR||r.type===Ge.FOCUS_OUT,Dt=!lr(f._f)&&!s.resolver&&!g(t.errors,l)&&!f._f.deps||ur(ie,g(t.touchedFields,l),t.isSubmitted,F,m),Ee=it(l,c,ie);E(n,l,_e),ie?(!i||!i.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),w&&w(0)):f._f.onChange&&f._f.onChange(r);const Ne=x(l,_e,ie),kt=!I(Ne)||Ee;if(!ie&&v.state.next({name:l,type:r.type,values:L(n)}),Dt)return(p.isValid||b.isValid)&&(s.mode==="onBlur"?ie&&j():ie||j()),kt&&v.state.next({name:l,...Ee?{}:Ne});if(!ie&&Ee&&v.state.next({...t}),s.resolver){const{errors:We}=await O([l]);if(d(_e),h){const At=at(t.errors,a,l),Ke=at(We,a,At.name||l);A=Ke.error,l=Ke.name,W=I(We)}}else z([l],!0),A=(await lt(f,c.disabled,n,re,s.shouldUseNativeValidation))[l],z([l]),d(_e),h&&(A?W=!1:(p.isValid||b.isValid)&&(W=await B(a,!0)));h&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&de(f._f.deps),G(l,W,A,Ne))}},he=(r,i)=>{if(g(t.errors,i)&&r.focus)return r.focus(),1},de=async(r,i={})=>{let l,h;const f=xe(r);if(s.resolver){const d=await ne(M(r)?r:f);l=I(d),h=r?!f.some(m=>g(d,m)):l}else r?(h=(await Promise.all(f.map(async d=>{const m=g(a,d);return await B(m&&m._f?{[d]:m}:m)}))).every(Boolean),!(!h&&!t.isValid)&&j()):h=l=await B(a);return v.state.next({...!q(r)||(p.isValid||b.isValid)&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),i.shouldFocus&&!h&&be(a,he,r?f:c.mount),h},pe=(r,i)=>{let l={...u.mount?n:o};return i&&(l=ft(i.dirtyFields?t.dirtyFields:t.touchedFields,l)),M(r)?l:q(r)?g(l,r):r.map(h=>g(l,h))},Ie=(r,i)=>({invalid:!!g((i||t).errors,r),isDirty:!!g((i||t).dirtyFields,r),error:g((i||t).errors,r),isValidating:!!g(t.validatingFields,r),isTouched:!!g((i||t).touchedFields,r)}),bt=r=>{r&&xe(r).forEach(i=>C(t.errors,i)),v.state.next({errors:r?t.errors:{}})},Ue=(r,i,l)=>{const h=(g(a,r,{_f:{}})._f||{}).ref,f=g(t.errors,r)||{},{ref:d,message:m,type:F,...A}=f;E(t.errors,r,{...A,...i,ref:h}),v.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&h&&h.focus&&h.focus()},vt=(r,i)=>Q(r)?v.state.subscribe({next:l=>"values"in l&&r(V(void 0,i),l)}):V(r,i,!0),Pe=r=>v.state.subscribe({next:i=>{dr(r.name,i.name,r.exact)&&or(i,r.formState||p,Ft,r.reRenderRoot)&&r.callback({values:{...n},...t,...i,defaultValues:o})}}).unsubscribe,pt=r=>(u.mount=!0,b={...b,...r.formState},Pe({...r,formState:b})),De=(r,i={})=>{for(const l of r?xe(r):c.mount)c.mount.delete(l),c.array.delete(l),i.keepValue||(C(a,l),C(n,l)),!i.keepError&&C(t.errors,l),!i.keepDirty&&C(t.dirtyFields,l),!i.keepTouched&&C(t.touchedFields,l),!i.keepIsValidating&&C(t.validatingFields,l),!s.shouldUnregister&&!i.keepDefaultValue&&C(o,l);v.state.next({values:L(n)}),v.state.next({...t,...i.keepDirty?{isDirty:Z()}:{}}),!i.keepIsValid&&j()},Be=({disabled:r,name:i})=>{(te(r)&&u.mount||r||c.disabled.has(i))&&(r?c.disabled.add(i):c.disabled.delete(i))},ke=(r,i={})=>{let l=g(a,r);const h=te(i.disabled)||te(s.disabled);return E(a,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...i}}),c.mount.add(r),l?Be({disabled:te(i.disabled)?i.disabled:s.disabled,name:r}):$(r,!0,i.value),{...h?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:ge(i.min),max:ge(i.max),minLength:ge(i.minLength),maxLength:ge(i.maxLength),pattern:ge(i.pattern)}:{},name:r,onChange:ee,onBlur:ee,ref:f=>{if(f){ke(r,i),l=g(a,r);const d=M(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=tr(d),F=l._f.refs||[];if(m?F.find(A=>A===d):d===l._f.ref)return;E(a,r,{_f:{...l._f,...m?{refs:[...F.filter(Se),d,...Array.isArray(g(o,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),$(r,!1,void 0,d)}else l=g(a,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(Kt(c.array,r)&&u.action)&&c.unMount.add(r)}}},Ae=()=>s.shouldFocusError&&be(a,he,c.mount),_t=r=>{te(r)&&(v.state.next({disabled:r}),be(a,(i,l)=>{const h=g(a,l);h&&(i.disabled=h._f.disabled||r,Array.isArray(h._f.refs)&&h._f.refs.forEach(f=>{f.disabled=h._f.disabled||r}))},0,!1))},He=(r,i)=>async l=>{let h;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=L(n);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:m}=await O();t.errors=d,f=L(m)}else await B(a);if(c.disabled.size)for(const d of c.disabled)C(f,d);if(C(t.errors,"root"),I(t.errors)){v.state.next({errors:{}});try{await r(f,l)}catch(d){h=d}}else i&&await i({...t.errors},l),Ae(),setTimeout(Ae);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},Vt=(r,i={})=>{g(a,r)&&(M(i.defaultValue)?U(r,L(g(o,r))):(U(r,i.defaultValue),E(o,r,L(i.defaultValue))),i.keepTouched||C(t.touchedFields,r),i.keepDirty||(C(t.dirtyFields,r),t.isDirty=i.defaultValue?Z(r,L(g(o,r))):Z()),i.keepError||(C(t.errors,r),p.isValid&&j()),v.state.next({...t}))},qe=(r,i={})=>{const l=r?L(r):o,h=L(l),f=I(r),d=f?o:h;if(i.keepDefaultValues||(o=l),!i.keepValues){if(i.keepDirtyValues){const m=new Set([...c.mount,...Object.keys(ce(o,n))]);for(const F of Array.from(m))g(t.dirtyFields,F)?E(d,F,g(n,F)):U(F,g(d,F))}else{if(Te&&M(r))for(const m of c.mount){const F=g(a,m);if(F&&F._f){const A=Array.isArray(F._f.refs)?F._f.refs[0]:F._f.ref;if(Ve(A)){const W=A.closest("form");if(W){W.reset();break}}}}if(i.keepFieldsRef)for(const m of c.mount)U(m,g(d,m));else a={}}n=s.shouldUnregister?i.keepDefaultValues?L(o):{}:L(d),v.array.next({values:{...d}}),v.state.next({values:{...d}})}c={mount:i.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!p.isValid||!!i.keepIsValid||!!i.keepDirtyValues||!s.shouldUnregister&&!I(d),u.watch=!!s.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:f?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ae(r,o)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:i.keepDirtyValues?i.keepDefaultValues&&n?ce(o,n):t.dirtyFields:i.keepDefaultValues&&r?ce(o,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},ze=(r,i)=>qe(Q(r)?r(n):r,i),wt=(r,i={})=>{const l=g(a,r),h=l&&l._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),i.shouldSelect&&Q(f.select)&&f.select())}},Ft=r=>{t={...t,...r}},$e={control:{register:ke,unregister:De,getFieldState:Ie,handleSubmit:He,setError:Ue,_subscribe:Pe,_runSchema:O,_focusError:Ae,_getWatch:V,_getDirty:Z,_setValid:j,_setFieldArray:ye,_setDisabledField:Be,_setErrors:X,_getFieldArray:D,_reset:qe,_resetDefaultValues:()=>Q(s.defaultValues)&&s.defaultValues().then(r=>{ze(r,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:_t,_subjects:v,_proxyFormState:p,get _fields(){return a},get _formValues(){return n},get _state(){return u},set _state(r){u=r},get _defaultValues(){return o},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:pt,trigger:de,register:ke,handleSubmit:He,watch:vt,setValue:U,getValues:pe,reset:ze,resetField:Vt,clearErrors:bt,unregister:De,setError:Ue,setFocus:wt,getFieldState:Ie};return{...$e,formControl:$e}}function gr(e={}){const s=H.useRef(void 0),t=H.useRef(void 0),[a,o]=H.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:a},e.defaultValues&&!Q(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...c}=hr(e);s.current={...c,formState:a}}const n=s.current.control;return n._options=e,Qt(()=>{const u=n._subscribe({formState:n._proxyFormState,callback:()=>o({...n._formState}),reRenderRoot:!0});return o(c=>({...c,isReady:!0})),n._formState.isReady=!0,u},[n]),H.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),H.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),H.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),H.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),H.useEffect(()=>{if(n._proxyFormState.isDirty){const u=n._getDirty();u!==a.isDirty&&n._subjects.state.next({isDirty:u})}},[n,a.isDirty]),H.useEffect(()=>{var u;e.values&&!ae(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((u=n._options.resetOptions)===null||u===void 0)&&u.keepIsValid||n._setValid(),t.current=e.values,o(c=>({...c}))):n._resetDefaultValues()},[n,e.values]),H.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=Jt(a,n),s.current}const ot=250,mr=({initialEvent:e,initialDate:s,onSubmit:t,onCancelEdit:a})=>{const o=!!e,{register:n,handleSubmit:u,reset:c,formState:w,watch:N}=gr(),p=K.useRef(null),b=N("description"),v=()=>{if(p.current){const k=p.current;k.style.height="auto",k.scrollHeight<=ot?(k.style.height=k.scrollHeight+"px",k.style.overflowY="hidden"):(k.style.height=`${ot}px`,k.style.overflowY="auto")}};K.useEffect(()=>{c({title:e?.title||"",description:e?.description||"",date:e?R(e.dateTime).format("YYYY-MM-DD"):s.format("YYYY-MM-DD"),time:e?R(e.dateTime).format("HH:mm"):"09:00"})},[e,s]),K.useEffect(()=>{v()},[b]);const re=k=>{const j=R(`${k.date} ${k.time}`).toISOString(),z={id:e?.id||crypto.randomUUID(),title:k.title,description:k.description,dateTime:j};t(z),c({title:"",description:"",date:s.format("YYYY-MM-DD"),time:"09:00"})};return y.jsxs("form",{onSubmit:u(re),className:"space-y-3",children:[y.jsx("p",{className:"font-semibold",children:o?"Edit Event":"New Event"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"date",required:!0,...n("date"),className:"rounded border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none disabled:bg-gray-100"}),y.jsx("input",{type:"time",required:!0,...n("time"),className:"rounded border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none"})]}),y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("input",{type:"text",required:!0,placeholder:o?"Change event title...":"Add event title...",...n("title"),className:"rounded border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none"}),y.jsx("textarea",{...n("description"),rows:1,placeholder:o?"Change event description...":"Add event description...",className:"flex resize-none overflow-hidden rounded border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none",ref:k=>{n("description").ref(k),p.current=k}})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"submit",className:"rounded bg-blue-600 p-2 text-white transition hover:bg-blue-700 disabled:opacity-50",disabled:!w.isDirty,children:y.jsx("div",{className:"flex items-center gap-2",children:o?y.jsxs(y.Fragment,{children:[y.jsx(Ht,{size:20}),y.jsx("span",{children:"Update"})]}):y.jsxs(y.Fragment,{children:[y.jsx(Pt,{size:20}),y.jsx("span",{children:"Add"})]})})}),o&&y.jsxs("button",{type:"button",onClick:a,className:"flex items-center gap-2 rounded bg-gray-300 p-2 text-gray-700 hover:bg-gray-400",children:[y.jsx(dt,{size:20})," Close"]})]})]})},xr=e=>{const s=e.startOf("month"),t=e.endOf("month"),a=s.weekday(),o=[];if(a>0)for(let b=a-1;b>=0;b--)o.unshift(s.subtract(b+1,"day"));const n=[],u=s.daysInMonth();for(let b=0;b<u;b++)n.push(s.add(b,"day"));const c=[...o,...n],w=c.length%7;let N;w===0?N=0:N=7-w;const p=[];for(let b=1;b<=N;b++)p.push(t.add(b,"day"));return[...c,...p]},br=()=>{const e=Nt(),s=jt(x=>x.calendar.events),[t,a]=K.useState(R()),[o,n]=K.useState(null),[u,c]=K.useState(!1),[w,N]=K.useState(null),[p,b]=K.useState(null),v=K.useMemo(()=>xr(t),[t]),re=K.useMemo(()=>s.reduce((x,G)=>{const O=R(G.dateTime).format("YYYY-MM-DD");return x[O]||(x[O]=[]),x[O].push(G),x[O].sort((ne,B)=>R(ne.dateTime).diff(R(B.dateTime))),x},{}),[s]),k=K.useMemo(()=>{if(!o)return[];const x=o.format("YYYY-MM-DD");return s.filter(O=>R(O.dateTime).format("YYYY-MM-DD")===x).sort((O,ne)=>R(O.dateTime).diff(R(ne.dateTime)))},[s,o]),j=x=>{n(x),N(null),c(!0)},z=x=>{N(x),n(R(x.dateTime))},ye=()=>{p&&(w?.id===p.id&&N(null),e(Ct(p.id)),b(null))},_=x=>{e(w?St(x):Mt(x)),N(null),n(R(x.dateTime))},X=()=>{N(null),n(o)},$=R.weekdaysMin(!0);return y.jsxs("div",{className:"mx-auto max-w-5xl min-w-xl rounded-xl bg-white shadow-lg",children:[y.jsxs("div",{className:"flex items-center justify-between bg-slate-800 p-6 text-white",children:[y.jsx("h2",{className:"text-2xl font-bold capitalize",children:t.format("MMMM YYYY")}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>a(t.subtract(1,"month")),className:"rounded-full p-2 hover:bg-slate-700",children:y.jsx(Rt,{})}),y.jsx("button",{onClick:()=>a(R()),className:"rounded border border-slate-500 px-4 py-1 text-sm hover:bg-slate-700",children:"Today"}),y.jsx("button",{onClick:()=>a(t.add(1,"month")),className:"rounded-full p-2 hover:bg-slate-700",children:y.jsx(Ot,{})})]})]}),y.jsx("div",{className:"grid grid-cols-7 border-b bg-gray-50 text-center",children:$.map(x=>y.jsx("div",{className:"border-r py-2 font-semibold text-gray-600 last:border-r-0",children:x},x))}),y.jsx("div",{className:"grid auto-rows-[100px] grid-cols-7",children:v.map(x=>{const G=x.format("YYYY-MM-DD"),O=re[G]||[];return y.jsx(ut,{day:x,dayEvents:O,currentDate:t,onDateClick:j},G)})}),y.jsx(Xe,{isOpen:u,onClose:()=>{c(!1),N(null)},title:o?`Events on ${o.format("D MMMM")}`:"",children:y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"max-h-60 space-y-2 overflow-y-auto",children:k.length===0?y.jsx("p",{className:"py-4 text-center text-gray-500",children:"No scheduled events"}):k.map(x=>y.jsxs("div",{className:me("group flex items-center justify-between rounded bg-gray-50 p-3 hover:bg-gray-100",x.id===w?.id&&"border border-blue-500"),children:[y.jsxs("div",{className:"flex",children:[y.jsx("p",{className:"mr-3 font-bold",children:R(x.dateTime).format("HH:mm")}),y.jsxs("div",{className:"wrap-anywhere",children:[y.jsx("p",{className:"mb-1 font-medium",children:x.title}),y.jsx("p",{className:"text-sm",children:x.description})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>z(x),className:"text-blue-500 hover:text-blue-700",children:y.jsx(It,{size:16})}),y.jsx("button",{onClick:()=>b(x),className:"text-red-500 hover:text-red-700",children:y.jsx(zt,{size:16})})]})]},x.id))}),y.jsx("hr",{}),o&&y.jsx(mr,{initialEvent:w,initialDate:o,onSubmit:_,onCancelEdit:X})]})}),y.jsx(Xe,{isOpen:p!==null,onClose:()=>b(null),title:`Would you like to delete the event "${p?.title}"?`,children:y.jsxs("div",{className:"flex gap-4",children:[y.jsx("button",{onClick:ye,className:"text-red-500 hover:text-red-700",children:"Delete"}),y.jsx("button",{onClick:()=>b(null),className:"text-blue-500 hover:text-blue-700",children:"Close"})]})})]})},Dr=()=>[{title:"Planner - Sandbox"},{name:"description",content:""}],kr=Et(function(){return y.jsx(br,{})});export{kr as default,Dr as meta};
